#Battery config

CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y

# ========= Power / Sleep =========

# 無操作300秒でスリープ
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=300000   # ms = 300秒

# USB接続中はスリープしない
CONFIG_ZMK_USB_SUSPEND=n

# ========= Wake / First Keystroke =========

# キー割り込みで即起床（1打鍵目を捨てない）
CONFIG_ZMK_WAKEUP_KEY=y

# Deep sleep を使う（超低消費）
CONFIG_PM_DEVICE=y
CONFIG_PM=y
CONFIG_PM_SLEEP_STATES=y
CONFIG_PM_STATE_SUSPEND_TO_RAM=y

# debounceが初打鍵を殺さないように
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5

# ========= Role =========
CONFIG_ZMK_SPLIT=y
CONFIG_ZMK_SPLIT_ROLE_CENTRAL=y

# ========= BLE / Host =========

# Host との BLE 接続は Central のみ
CONFIG_ZMK_BLE=y
CONFIG_ZMK_BLE_ROLE_CENTRAL=y

# bond 情報保持（スリープ復帰を速く）
CONFIG_BT_SETTINGS=y
CONFIG_BT_MAX_PAIRED=1

# 再接続遅延を最小化
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=12
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=24
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# ========= Split behavior =========

# 子側が起床したら Central も起きる
CONFIG_ZMK_SPLIT_WAKEUP=y

# Central が先に起きていなくても
# Peripheral の初打鍵を取りこぼさない
CONFIG_ZMK_SPLIT_BLE_CENTRAL_PERIPHERAL=y
